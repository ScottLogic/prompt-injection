.defence-mechanism-fieldset {
	min-height: fit-content;
	margin: 0.1em;
	border: 0.25rem solid var(--control-config-border);
	border-radius: 0.5rem;
}

/* the name of the fieldset */
.defence-mechanism-legend {
	padding: 0.3em;
}

/* the more button to expand the details */
.defence-mechanism-summary {
	width: fit-content;
	padding: 0.5rem;
	border: 0.125rem outset var(--control-config-border);
	border-radius: 0.25rem;
}

.defence-mechanism > summary {
	font-size: 1rem;
}

/* remove the default triangle on the summary element */
.defence-mechanism-fieldset details > summary {
	list-style: none;
}

.defence-mechanism-fieldset details > summary::-webkit-details-marker {
	display: none;
}

/* style for when details element is expanded */
.defence-mechanism-fieldset details[open] > summary {
	border-style: inset;
}

/* the toggle and label combined */
.defence-mechanism-form {
	position: absolute;
	right: 1em;
}

.defence-mechanism {
	cursor: default;
}

.defence-mechanism .info-box :first-child {
	margin-top: 0;
}

/* the expanded description and further controls */
.defence-mechanism .info-box {
	padding: 0.5em;
	font-size: 0.875rem;
}

.defence-mechanism .info-box .validation-text {
	font-weight: 600;
	font-size: inherit;
}

.defence-mechanism .defence-radio-buttons {
	display: flex;
	flex-direction: column;
	gap: 0.5rem;
	padding: 0.75rem 0;
}

.defence-mechanism .prompt-enclosure-configuration-area {
	padding: 0;
}

/* adapted from: https://adrianroselli.com/2019/03/under-engineered-toggles.html */

/* default checkbox hidden without removing it from the DOM */
.toggles [type='checkbox'] {
	position: absolute;
	top: auto;
	overflow: hidden;
	clip: rect(1px, 1px, 1px, 1px);
	width: 1px;
	height: 1px;
	white-space: nowrap;
}

/* the  label */
.toggles [type='checkbox'] + label {
	position: relative;
	display: block;
	max-width: fit-content;
	padding-right: 3em;
	text-align: right;
}

.toggles [type='checkbox'] + label::before,
.toggles [type='checkbox'] + label::after {
	content: '';
	position: absolute;
	height: 0.9em;
	transition: all 0.25s ease;
}

/* the  label hovered or focused */
.toggles [type='checkbox']:focus + label,
.toggles [type='checkbox']:hover + label {
	color: var(--main-text-accent-colour);
}

/* background oval before it's checked */
.toggles [type='checkbox'] + label::before {
	top: 0.1em;
	right: 0;
	width: 1.9em;
	border: 0.15em solid var(--main-toggle-off-border-colour);
	border-radius: 1.1em;
	background: var(--main-toggle-off-colour);
}

/* round toggle slider */
.toggles [type='checkbox'] + label::after {
	top: 0.17em;
	right: 0.95em;
	width: 1em;
	border: 0.05em solid var(--main-toggle-off-border-colour);
	border-radius: 50%;
	background: var(--main-text-colour);
	background-position: center center;
}

.toggles [type='checkbox']:focus + label::before,
.toggles [type='checkbox']:hover + label::before {
	box-shadow: 0 0 0.3em var(--main-text-colour);
}

.toggles [type='checkbox']:focus + label::after,
.toggles [type='checkbox']:hover + label::after {
	background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='50' cy='50' r='50' fill='rgba(0,0,0,.25)'/%3E%3C/svg%3E");
	background-position: center center;
	background-size: 30%;
	background-repeat: no-repeat;
}

/* round toggle slider sliding to the right */
.toggles [type='checkbox']:checked + label::after {
	right: 0.1em;
	border-color: var(--main-toggle-on-border-colour);
	color: var(--main-toggle-on-border-colour);
}

/* background oval when it's checked */
.toggles [type='checkbox']:checked + label::before {
	border-color: var(--main-toggle-on-border-colour);
	background-color: var(--main-toggle-on-border-colour);
}

/* Reduced motion */
@media screen and (prefers-reduced-motion: reduce) {
	.toggles [type='checkbox'] + label::before,
	.toggles [type='checkbox'] + label::after {
		transition: none;
	}
}
